#!/usr/bin/env ruby

$:.unshift File.join(File.dirname(__FILE__), *%w[.. lib])
require 'pwm/dialog'

begin
  puts %x[echo "#{Pwm::Dialog::LinuxDialog.new.get_password}" | bin/pwm #{ARGV.join(' ')}]
rescue Pwm::Dialog::Cancelled
  exit $!.message
end
